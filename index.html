<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Wraps the Ollama &lt;https://ollama.com&gt; API, which can be used to communicate with generative large language models locally.">
<title>Communicate with Ollama • rollama</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Communicate with Ollama">
<meta property="og:description" content="Wraps the Ollama &lt;https://ollama.com&gt; API, which can be used to communicate with generative large language models locally.">
<meta property="og:image" content="https://jbgruber.github.io/rollama/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rollama</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/annotation.html">annotation</a>
    <a class="dropdown-item" href="articles/image-annotation.html">image-annotation</a>
    <a class="dropdown-item" href="articles/text-embedding.html">text-embedding</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JBGruber/rollama/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="rollama-">
<code>rollama</code> <a class="anchor" aria-label="anchor" href="#rollama-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of <code>rollama</code> is to wrap the Ollama API, which allows you to run different LLMs locally and create an experience similar to ChatGPT/OpenAI’s API. Ollama is very easy to deploy and handles a huge number of models. Checkout the project here: <a href="https://github.com/ollama/ollama" class="external-link uri">https://github.com/ollama/ollama</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install this package from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rollama"</span><span class="op">)</span></span></code></pre></div>
<p>Or you can install the development version of <code>rollama</code> from <a href="https://github.com/JBGruber/rollama" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"JBGruber/rollama"</span><span class="op">)</span></span></code></pre></div>
<p>The easiest way to get Ollama itself up and running is through <a href="https://docs.docker.com/desktop/" class="external-link">Docker</a>. From the command line interface, you can start Ollama locally with one command (add <code>sudo</code> if <code>permission denied</code>):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">-v</span> ollama:/root/.ollama <span class="at">-p</span> 11434:11434 <span class="at">--name</span> ollama ollama/ollama</span></code></pre></div>
<p>After restarting, you can run Ollama again with the command (add <code>sudo</code> if <code>permission denied</code>):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">docker</span> start ollama</span></code></pre></div>
<p>Alternatively, you can use the Docker Compose file from <a href="https://gist.github.com/JBGruber/73f9f49f833c6171b8607b976abc0ddc" class="external-link">this gist</a>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">wget</span> https://gist.githubusercontent.com/JBGruber/73f9f49f833c6171b8607b976abc0ddc/raw/4abf613b60a6e816ef975f31b2758d898baab249/docker-compose.yml</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div>
<p>If you don’t know how to use Docker Compose, you can follow this video:</p>
<p><a href="https://www.youtube.com/watch?v=iMyCdd5nP5U" class="external-link"><img src="https://img.youtube.com/vi/iMyCdd5nP5U/0.jpg" alt="Install Docker on macOS, Windows and Linux"></a></p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The first thing you should do after installation is to pull one of the models from <a href="https://ollama.com/library" class="external-link uri">https://ollama.com/library</a>. By calling <code><a href="reference/pull_model.html">pull_model()</a></code> without arguments, you are pulling the (current) default model — “llama2 7b”:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jbgruber.github.io/rollama/">rollama</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pull_model.html">pull_model</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>There are two ways to communicate with the Ollama API. You can make single requests, which does not store any history and treats each query as the beginning of a new chat:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ask a single question</span></span>
<span><span class="fu"><a href="reference/query.html">query</a></span><span class="op">(</span><span class="st">"why is the sky blue?"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Answer from llama2 ──────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The sky appears blue because of a phenomenon called Rayleigh scattering, which</span></span>
<span><span class="co">#&gt; occurs when light travels through the Earth's atmosphere. In this process,</span></span>
<span><span class="co">#&gt; shorter (blue) wavelengths of light are scattered more than longer (red)</span></span>
<span><span class="co">#&gt; wavelengths, causing the light to appear blue. This is known as Rayleigh</span></span>
<span><span class="co">#&gt; scattering and it happens because the smaller molecules of gases in the air</span></span>
<span><span class="co">#&gt; scatter shorter wavelengths of light in all directions, while the longer</span></span>
<span><span class="co">#&gt; wavelengths pass straight through with little scattering.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The main reason for this phenomenon is the way that light interacts with the</span></span>
<span><span class="co">#&gt; tiny molecules of gases in the atmosphere, such as nitrogen and oxygen. These</span></span>
<span><span class="co">#&gt; molecules are much smaller than the wavelength of light, so they can only</span></span>
<span><span class="co">#&gt; scatter light in all directions by a small amount. This means that the blue</span></span>
<span><span class="co">#&gt; light is scattered in all directions, giving the sky its blue appearance.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The blue color of the sky can also be affected by other factors such as the</span></span>
<span><span class="co">#&gt; presence of dust, water vapor, and pollutants in the atmosphere, which can</span></span>
<span><span class="co">#&gt; absorb or scatter certain wavelengths of light, altering the overall color of</span></span>
<span><span class="co">#&gt; the sky. However, the primary reason for the blue color of the sky is Rayleigh</span></span>
<span><span class="co">#&gt; scattering.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; It's worth noting that the blue color of the sky can appear different under</span></span>
<span><span class="co">#&gt; different conditions, such as during sunrise and sunset when the light has to</span></span>
<span><span class="co">#&gt; travel through more atmosphere, or when there are heavy clouds or haze in the</span></span>
<span><span class="co">#&gt; air. In these cases, the blue color may be less pronounced or even absent.</span></span></code></pre></div>
<p>Or you can use the <code>chat</code> function, treats all messages sent during an R session as part of the same conversation:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># hold a conversation</span></span>
<span><span class="fu"><a href="reference/query.html">chat</a></span><span class="op">(</span><span class="st">"why is the sky blue?"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Answer from llama2 ──────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The sky appears blue because of a phenomenon called Rayleigh scattering. When</span></span>
<span><span class="co">#&gt; sunlight enters Earth's atmosphere, it encounters tiny molecules of gases such</span></span>
<span><span class="co">#&gt; as nitrogen and oxygen. These molecules scatter the light in all directions,</span></span>
<span><span class="co">#&gt; but they scatter shorter (blue) wavelengths more than longer (red) wavelengths.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; This is known as Rayleigh scattering, named after the British physicist Lord</span></span>
<span><span class="co">#&gt; Rayleigh, who first described the process in the late 19th century. The</span></span>
<span><span class="co">#&gt; scattered light then reaches our eyes, giving us the impression of a blue sky.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The reason for the bias towards blue scattering is due to the molecular size</span></span>
<span><span class="co">#&gt; and the wavelength of the light. The smaller the molecule, the more it scatters</span></span>
<span><span class="co">#&gt; shorter wavelengths of light. The wavelength of light that is scattered the</span></span>
<span><span class="co">#&gt; most is around 450 nanometers (blue light), which is why the sky appears blue</span></span>
<span><span class="co">#&gt; during the daytime when the sun is overhead.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; It's worth noting that the color of the sky can appear to change depending on</span></span>
<span><span class="co">#&gt; the time of day, atmospheric conditions, and even the viewer's surroundings.</span></span>
<span><span class="co">#&gt; For example, during sunrise and sunset, the sky can take on hues of red,</span></span>
<span><span class="co">#&gt; orange, and pink due to the scattering of light by larger atmospheric</span></span>
<span><span class="co">#&gt; particles.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; In summary, the sky appears blue because of Rayleigh scattering, which is a</span></span>
<span><span class="co">#&gt; phenomenon where shorter wavelengths of light are scattered more than longer</span></span>
<span><span class="co">#&gt; wavelengths by tiny molecules in Earth's atmosphere.</span></span>
<span><span class="fu"><a href="reference/query.html">chat</a></span><span class="op">(</span><span class="st">"and how do you know that?"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Answer from llama2 ──────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; I know that the sky appears blue due to Rayleigh scattering because it is a</span></span>
<span><span class="co">#&gt; well-established scientific fact that has been observed, measured, and</span></span>
<span><span class="co">#&gt; explained through various scientific studies and experiments. Here are some of</span></span>
<span><span class="co">#&gt; the key pieces of evidence and explanations:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1. Observations: The blue color of the sky has been observed and documented by</span></span>
<span><span class="co">#&gt; scientists and artists throughout history. The ancient Greeks, for example,</span></span>
<span><span class="co">#&gt; knew that the sky appeared blue during the daytime and red at sunset.</span></span>
<span><span class="co">#&gt; 2. Spectroscopy: Scientists have used spectroscopy to study the light</span></span>
<span><span class="co">#&gt; absorption and emission properties of gases in the atmosphere. By analyzing the</span></span>
<span><span class="co">#&gt; spectrum of light scattered by the atmosphere, scientists have determined that</span></span>
<span><span class="co">#&gt; the blue color of the sky is due to the scattering of blue light by small</span></span>
<span><span class="co">#&gt; molecules of gases such as nitrogen and oxygen.</span></span>
<span><span class="co">#&gt; 3. Mathematical modeling: Scientists have developed mathematical models to</span></span>
<span><span class="co">#&gt; simulate the behavior of light in the atmosphere and predict the colors that</span></span>
<span><span class="co">#&gt; would be observed at different angles of the sun and Earth. These models</span></span>
<span><span class="co">#&gt; confirm that Rayleigh scattering is the primary mechanism responsible for the</span></span>
<span><span class="co">#&gt; blue color of the sky.</span></span>
<span><span class="co">#&gt; 4. Laboratory experiments: Researchers have conducted laboratory experiments to</span></span>
<span><span class="co">#&gt; study the behavior of light in small volumes of gas, mimicking the conditions</span></span>
<span><span class="co">#&gt; of the atmosphere. These experiments have shown that the blue color of the sky</span></span>
<span><span class="co">#&gt; can be reproduced by scattering light by small molecules of gases under</span></span>
<span><span class="co">#&gt; controlled conditions.</span></span>
<span><span class="co">#&gt; 5. Satellite imagery: Satellite images of the Earth's atmosphere have confirmed</span></span>
<span><span class="co">#&gt; that the blue color of the sky is indeed due to Rayleigh scattering. These</span></span>
<span><span class="co">#&gt; images show that the blue color of the sky is most pronounced in areas with</span></span>
<span><span class="co">#&gt; low-altitude atmospheric layers, where there are more small molecules of gases</span></span>
<span><span class="co">#&gt; to scatter the light.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; In summary, the blue color of the sky is a well-established scientific fact</span></span>
<span><span class="co">#&gt; that has been observed, measured, and explained through various scientific</span></span>
<span><span class="co">#&gt; studies and experiments. The evidence from these studies confirms that Rayleigh</span></span>
<span><span class="co">#&gt; scattering is the primary mechanism responsible for the blue color of the sky.</span></span></code></pre></div>
<p>If you are done with a conversation and want to start a new one, you can do that like so:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/chat_history.html">new_chat</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-parameters">Model parameters<a class="anchor" aria-label="anchor" href="#model-parameters"></a>
</h2>
<p>You can set a number of model parameters, either by creating a new model, with a <a href="https://jbgruber.github.io/rollama/reference/create_model.html">modelfile</a>, or by including the parameters in the prompt:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/query.html">query</a></span><span class="op">(</span><span class="st">"why is the sky blue?"</span>, model_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  seed <span class="op">=</span> <span class="fl">42</span>,</span>
<span>  temperature <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  num_gpu <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Answer from llama2 ──────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The sky appears blue because of a phenomenon called Rayleigh scattering, which</span></span>
<span><span class="co">#&gt; occurs when sunlight enters Earth's atmosphere. The sunlight encounters tiny</span></span>
<span><span class="co">#&gt; molecules of gases such as nitrogen and oxygen, which scatter the light in all</span></span>
<span><span class="co">#&gt; directions.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The shorter wavelengths of light, such as blue and violet, are scattered more</span></span>
<span><span class="co">#&gt; than the longer wavelengths, such as red and orange. This is known as</span></span>
<span><span class="co">#&gt; Rayleigh's Law. As a result, the blue light is dispersed throughout the</span></span>
<span><span class="co">#&gt; atmosphere, giving the sky its blue appearance.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The reason why the sky appears blue under these conditions is due to the way</span></span>
<span><span class="co">#&gt; that our eyes perceive colors. When white light enters our eyes, it is filtered</span></span>
<span><span class="co">#&gt; through the lens and hits the retina, which contains cells called cone cells</span></span>
<span><span class="co">#&gt; that are sensitive to different wavelengths of light. The cells are most</span></span>
<span><span class="co">#&gt; sensitive to the blue and violet end of the spectrum, so when we look at a blue</span></span>
<span><span class="co">#&gt; sky, our brains interpret this as the dominant color.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; It's worth noting that the appearance of the sky can vary depending on a number</span></span>
<span><span class="co">#&gt; of factors, including the time of day, the amount of dust and water vapor in</span></span>
<span><span class="co">#&gt; the air, and the angle of the sun. For example, during sunrise and sunset, the</span></span>
<span><span class="co">#&gt; sky can take on hues of red, orange, and pink due to the scattering of light by</span></span>
<span><span class="co">#&gt; atmospheric particles.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; In summary, the sky appears blue because of the way that light is scattered in</span></span>
<span><span class="co">#&gt; the atmosphere, and how our eyes perceive colors.</span></span></code></pre></div>
<div class="section level4">
<h4 id="valid-parameters-and-values">Valid Parameters and Values<a class="anchor" aria-label="anchor" href="#valid-parameters-and-values"></a>
</h4>
<table class="table">
<colgroup>
<col width="4%">
<col width="84%">
<col width="3%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Example Usage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>mirostat</td>
<td>Enable Mirostat sampling for controlling perplexity. (default: 0, 0 = disabled, 1 = Mirostat, 2 = Mirostat 2.0)</td>
<td>int</td>
<td>mirostat 0</td>
</tr>
<tr class="even">
<td>mirostat_eta</td>
<td>Influences how quickly the algorithm responds to feedback from the generated text. A lower learning rate will result in slower adjustments, while a higher learning rate will make the algorithm more responsive. (Default: 0.1)</td>
<td>float</td>
<td>mirostat_eta 0.1</td>
</tr>
<tr class="odd">
<td>mirostat_tau</td>
<td>Controls the balance between coherence and diversity of the output. A lower value will result in more focused and coherent text. (Default: 5.0)</td>
<td>float</td>
<td>mirostat_tau 5.0</td>
</tr>
<tr class="even">
<td>num_ctx</td>
<td>Sets the size of the context window used to generate the next token. (Default: 2048)</td>
<td>int</td>
<td>num_ctx 4096</td>
</tr>
<tr class="odd">
<td>num_gqa</td>
<td>The number of GQA groups in the transformer layer. Required for some models, for example it is 8 for llama2:70b</td>
<td>int</td>
<td>num_gqa 1</td>
</tr>
<tr class="even">
<td>num_gpu</td>
<td>The number of layers to send to the GPU(s). On macOS it defaults to 1 to enable metal support, 0 to disable.</td>
<td>int</td>
<td>num_gpu 50</td>
</tr>
<tr class="odd">
<td>num_thread</td>
<td>Sets the number of threads to use during computation. By default, Ollama will detect this for optimal performance. It is recommended to set this value to the number of physical CPU cores your system has (as opposed to the logical number of cores).</td>
<td>int</td>
<td>num_thread 8</td>
</tr>
<tr class="even">
<td>repeat_last_n</td>
<td>Sets how far back for the model to look back to prevent repetition. (Default: 64, 0 = disabled, -1 = num_ctx)</td>
<td>int</td>
<td>repeat_last_n 64</td>
</tr>
<tr class="odd">
<td>repeat_penalty</td>
<td>Sets how strongly to penalize repetitions. A higher value (e.g., 1.5) will penalize repetitions more strongly, while a lower value (e.g., 0.9) will be more lenient. (Default: 1.1)</td>
<td>float</td>
<td>repeat_penalty 1.1</td>
</tr>
<tr class="even">
<td>temperature</td>
<td>The temperature of the model. Increasing the temperature will make the model answer more creatively. (Default: 0.8)</td>
<td>float</td>
<td>temperature 0.7</td>
</tr>
<tr class="odd">
<td>seed</td>
<td>Sets the random number seed to use for generation. Setting this to a specific number will make the model generate the same text for the same prompt. (Default: 0)</td>
<td>int</td>
<td>seed 42</td>
</tr>
<tr class="even">
<td>stop</td>
<td>Sets the stop sequences to use. When this pattern is encountered the LLM will stop generating text and return. Multiple stop patterns may be set by specifying multiple separate <code>stop</code> parameters in a modelfile.</td>
<td>string</td>
<td>stop “AI assistant:”</td>
</tr>
<tr class="odd">
<td>tfs_z</td>
<td>Tail free sampling is used to reduce the impact of less probable tokens from the output. A higher value (e.g., 2.0) will reduce the impact more, while a value of 1.0 disables this setting. (default: 1)</td>
<td>float</td>
<td>tfs_z 1</td>
</tr>
<tr class="even">
<td>num_predict</td>
<td>Maximum number of tokens to predict when generating text. (Default: 128, -1 = infinite generation, -2 = fill context)</td>
<td>int</td>
<td>num_predict 42</td>
</tr>
<tr class="odd">
<td>top_k</td>
<td>Reduces the probability of generating nonsense. A higher value (e.g. 100) will give more diverse answers, while a lower value (e.g. 10) will be more conservative. (Default: 40)</td>
<td>int</td>
<td>top_k 40</td>
</tr>
<tr class="even">
<td>top_p</td>
<td>Works together with top-k. A higher value (e.g., 0.95) will lead to more diverse text, while a lower value (e.g., 0.5) will generate more focused and conservative text. (Default: 0.9)</td>
<td>float</td>
<td>top_p 0.9</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h2>
<p>You can configure the server address, the system prompt and the model used for a query or chat. If not configured otherwise, <code>rollama</code> assumes you are using the default port (11434) of a local instance (“localhost”). Let’s make this explicit by setting the option:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rollama_server <span class="op">=</span> <span class="st">"http://localhost:11434"</span><span class="op">)</span></span></code></pre></div>
<p>You can change how a model answers by setting a configuration or system message in plain English (or another language supported by the model):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rollama_config <span class="op">=</span> <span class="st">"You make answers understandable to a 5 year old"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/query.html">query</a></span><span class="op">(</span><span class="st">"why is the sky blue?"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Answer from llama2 ──────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Oh, wow! That's a great question! *giggles* You know what? The sky is blue</span></span>
<span><span class="co">#&gt; because of tiny little things called "water drops" that are up there in the</span></span>
<span><span class="co">#&gt; air. They reflect sunlight and make the sky look blue! Just like when you hold</span></span>
<span><span class="co">#&gt; a mirror under the water in the bathtub, and it looks blue too! *excitedly*</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; And do you know what's even more cool? The sky can change colors! Sometimes</span></span>
<span><span class="co">#&gt; it's red during sunset, or yellow during sunrise. It's like magic! *smiles* So,</span></span>
<span><span class="co">#&gt; that's why the sky is blue! Isn't that amazing? 😍</span></span></code></pre></div>
<p>By default, the package uses the “llama2 7B” model. Supported models can be found at <a href="https://ollama.com/library" class="external-link uri">https://ollama.com/library</a>. To download a specific model make use of the additional information available in “Tags” <a href="https://ollama.com/library/mistral/tags" class="external-link uri">https://ollama.com/library/mistral/tags</a>. Change this via <code>rollama_model</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rollama_model <span class="op">=</span> <span class="st">"mixtral"</span><span class="op">)</span></span>
<span><span class="co"># if you don't have the model yet: pull_model("mixtral")</span></span>
<span><span class="fu"><a href="reference/query.html">query</a></span><span class="op">(</span><span class="st">"why is the sky blue?"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Answer from mixtral ─────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; When the sun shines, it sends out little bits of light called "sunlight."</span></span>
<span><span class="co">#&gt; Sunlight is made up of different colors, like red, orange, yellow, green, blue,</span></span>
<span><span class="co">#&gt; and purple. You can see all these colors in a rainbow!</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; When sunlight reaches our sky, it meets tiny particles (like molecules of air)</span></span>
<span><span class="co">#&gt; that scatter, or spread, the light in different directions. Blue light is</span></span>
<span><span class="co">#&gt; scattered more than other colors because it travels in smaller, shorter waves.</span></span>
<span><span class="co">#&gt; This scattering makes the sky look blue to us.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; At sunrise and sunset, the sunlight has to travel a longer path through the</span></span>
<span><span class="co">#&gt; atmosphere to reach our eyes. During this journey, even more of the blue light</span></span>
<span><span class="co">#&gt; gets scattered away, leaving mostly reds, oranges, and yellows for us to see.</span></span>
<span><span class="co">#&gt; That's why sunrises and sunsets often have beautiful colors!</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rollama" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/JBGruber/rollama/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rollama</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Johannes B. Gruber <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9177-1772" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Maximilian Weber <br><small class="roles"> Author, contributor </small> <a href="https://orcid.org/0000-0002-1174-449X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/JBGruber/rollama/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/JBGruber/rollama/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/JBGruber/rollama?branch=main" class="external-link"><img src="https://codecov.io/gh/JBGruber/rollama/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=rollama" class="external-link"><img src="https://www.r-pkg.org/badges/version/rollama" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=rollama" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/rollama" alt="CRAN_Download_Badge"></a></li>
<li><a href="https://doi.org/10.48550/arXiv.2404.07654" class="external-link"><img src="https://img.shields.io/badge/DOI-arXiv.2404.07654-B31B1B?logo=arxiv" alt="arXiv:10.48550/arXiv.2404.07654"></a></li>
<li><a href="https://saythanks.io/to/JBGruber" class="external-link"><img src="https://img.shields.io/badge/Say%20Thanks-!-1EAEDB.svg" alt="say-thanks"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes B. Gruber, Maximilian Weber.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
